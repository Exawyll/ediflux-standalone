<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Invoice {{ invoice.invoice_number }}</title>
    <style>
        body { font-family: sans-serif; margin: 40px; }
        .header { display: flex; justify-content: space-between; margin-bottom: 50px; }
        .company-info h2, .client-info h2 { margin-top: 0; }
        table { width: 100%; border-collapse: collapse; margin-top: 20px; }
        th, td { border: 1px solid #ddd; padding: 8px; text-align: left; }
        th { background-color: #f2f2f2; }
        .totals { margin-top: 20px; text-align: right; }
        .totals p { margin: 5px 0; }
        .bold { font-weight: bold; }
    </style>
</head>
<body>
    <div class="header">
        <div class="company-info">
            <h2>{{ invoice.seller.name }}</h2>
            <p>{{ invoice.seller.address.street }}<br>
            {{ invoice.seller.address.zip_code }} {{ invoice.seller.address.city }}<br>
            {{ invoice.seller.address.country_code }}</p>
            <p>VAT: {{ invoice.seller.vat_id }}<br>
            SIRET: {{ invoice.seller.siret }}</p>
        </div>
        <div class="client-info">
            <h2>To: {{ invoice.buyer.name }}</h2>
            <p>{{ invoice.buyer.address.street }}<br>
            {{ invoice.buyer.address.zip_code }} {{ invoice.buyer.address.city }}<br>
            {{ invoice.buyer.address.country_code }}</p>
            <p>VAT: {{ invoice.buyer.vat_id }}</p>
        </div>
    </div>

    <h1>Invoice #{{ invoice.invoice_number }}</h1>
    <p>Date: {{ invoice.date }}</p>

    <table>
        <thead>
            <tr>
                <th>Description</th>
                <th>Quantity</th>
                <th>Unit Price</th>
                <th>VAT Rate</th>
                <th>Total</th>
            </tr>
        </thead>
        <tbody>
            {% for item in invoice.items %}
            <tr>
                <td>{{ item.description }}</td>
                <td>{{ item.quantity }}</td>
                <td>{{ "%.2f"|format(item.unit_price) }} €</td>
                <td>{{ "%.1f"|format(item.vat_rate) }}%</td>
                <td>{{ "%.2f"|format(item.quantity * item.unit_price) }} €</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>

    <div class="totals">
        <p>Total Excl. Tax: {{ "%.2f"|format(total_tax_basis) }} €</p>
        <p>Total VAT: {{ "%.2f"|format(total_vat) }} €</p>
        <p class="bold">Total Inc. Tax: {{ "%.2f"|format(total_with_tax) }} €</p>
    </div>
</body>
</html>
